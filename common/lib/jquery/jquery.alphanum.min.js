!function (e) { function t() { var e = "!@#$%^&*()+=[]\\';,/{}|\":<>?~`.- _"; return e } function n() { var e = "¬€£"; return e } function r(t, n, r) { t.each(function () { var t = e(this); t.bind("keyup change paste", function () { setTimeout(function () { o(t, n, r) }, 0) }), t.bind("keypress", function (e) { var o = e.charCode ? e.charCode : e.which; if (!a(o) && !e.ctrlKey) { var l = String.fromCharCode(o), i = t.selection(), c = i.start, u = i.end, s = t.val(), f = s.substring(0, c) + l + s.substring(u), p = n(f, r); p != f && e.preventDefault() } }) }) } function a(e) { return e >= 32 ? !1 : 10 == e ? !1 : 13 == e ? !1 : !0 } function o(e, t, n) { var r = e.val(), a = t(r, n); if (r != a) { var o = e.caret(); e.val(a), e.caret(r.length == a.length + 1 ? o - 1 : o) } } function l(t, n) { "undefined" == typeof n && (n = R); var r, a = {}; return r = "string" == typeof t ? E[t] : "undefined" == typeof t ? {} : t, e.extend(a, n, r), "undefined" == typeof a.blacklist && (a.blacklistSet = S(a.allow, a.disallow)), a } function i(t) { var n, r = {}; return n = "string" == typeof t ? N[t] : "undefined" == typeof t ? {} : t, e.extend(r, C, n), r } function c(e, t) { return t.allowSpace && " " == e ? !0 : t.blacklistSet.contains(e) ? !1 : !t.allowNumeric && L[e] ? !1 : !t.allowUpper && m(e) ? !1 : !t.allowLower && g(e) ? !1 : !t.allowCaseless && w(e) ? !1 : !t.allowLatin && O.contains(e) ? !1 : t.allowOtherCharSets ? !0 : L[e] || O.contains(e) ? !0 : !1 } function u(e, t, n) { if (L[t]) return f(e, n) ? !1 : v(e, n) ? !1 : p(e, n) ? !1 : !0; if (n.allowPlus && "+" == t && "" == e) return !0; if (n.allowMinus && "-" == t && "" == e) return !0; if (t == D && n.allowThouSep) return !0; if (t == k) { if (e.indexOf(k) >= 0) return !1; if (n.allowDecSep) return !0 } return !1 } function s(e) { return e += "", e.replace(/[^0-9]/g, "").length } function f(e, t) { var n = t.maxDigits; if ("" == n || isNaN(n)) return !1; var r = s(e); return r >= n ? !0 : !1 } function p(e, t) { var n = t.maxDecimalPlaces; if ("" == n || isNaN(n)) return !1; var r = e.indexOf(k); if (-1 == r) return !1; var a = e.substring(r), o = s(a); return o >= n ? !0 : !1 } function v(e, t) { var n = t.maxPreDecimalPlaces; if ("" == n || isNaN(n)) return !1; var r = e.indexOf(k); if (r >= 0) return !1; var a = s(e); return a >= n ? !0 : !1 } function d(e, t) { if ("string" != typeof e) return e; var n, r = e.split(""), a = [], o = 0; for (o = 0; o < r.length; o++) n = r[o], c(n, t) && a.push(n); return a.join("") } function h(e, t) { if ("string" != typeof e) return e; var n, r = e.split(""), a = [], o = 0; for (o = 0; o < r.length; o++) { n = r[o]; var l = a.join(""); u(l, n, t) && a.push(n) } return a.join("") } function m(e) { var t = e.toUpperCase(), n = e.toLowerCase(); return e == t && t != n ? !0 : !1 } function g(e) { var t = e.toUpperCase(), n = e.toLowerCase(); return e == n && t != n ? !0 : !1 } function w(e) { return e.toUpperCase() == e.toLowerCase() ? !0 : !1 } function S(e, t) { var n = new x(b + t), r = new x(e), a = n.subtract(r); return a } function T() { var e, t = "0123456789".split(""), n = {}, r = 0; for (r = 0; r < t.length; r++) e = t[r], n[e] = !0; return n } function y() { var e = "abcdefghijklmnopqrstuvwxyz", t = e.toUpperCase(), n = new x(e + t); return n } function x(e) { this.map = "string" == typeof e ? P(e) : {} } function P(e) { var t, n = {}, r = e.split(""), a = 0; for (a = 0; a < r.length; a++) t = r[a], n[t] = !0; return n } e.fn.alphanum = function (e) { var t = l(e), n = this; r(n, d, t) }, e.fn.alpha = function (e) { var t = l("alpha"), n = l(e, t), a = this; r(a, d, n) }, e.fn.numeric = function (e) { var t = i(e), n = this; r(n, h, t) }; var R = { allow: "", disallow: "", allowSpace: !0, allowNumeric: !0, allowUpper: !0, allowLower: !0, allowCaseless: !0, allowLatin: !0, allowOtherCharSets: !0 }, C = { allowPlus: !1, allowMinus: !0, allowThouSep: !0, allowDecSep: !0, allowLeadingSpaces: !1, maxDigits: "", maxDecimalPlaces: "", maxPreDecimalPlaces: "" }, E = { alpha: { allowNumeric: !1 }, upper: { allowNumeric: !1, allowUpper: !0, allowLower: !1, allowCaseless: !0 }, lower: { allowNumeric: !1, allowUpper: !1, allowLower: !0, allowCaseless: !0 } }, N = { integer: { allowPlus: !1, allowMinus: !0, allowThouSep: !1, allowDecSep: !1 }, positiveInteger: { allowPlus: !1, allowMinus: !1, allowThouSep: !1, allowDecSep: !1 } }, b = t() + n(), D = ",", k = ".", L = T(), O = y(); x.prototype.add = function (e) { var t = this.clone(); for (key in e.map) t.map[key] = !0; return t }, x.prototype.subtract = function (e) { var t = this.clone(); for (key in e.map) delete t.map[key]; return t }, x.prototype.contains = function (e) { return this.map[e] ? !0 : !1 }, x.prototype.clone = function () { var e = new x; for (key in this.map) e.map[key] = !0; return e }, e.fn.alphanum.backdoorAlphaNum = function (e, t) { var n = l(t); return d(e, n) }, e.fn.alphanum.backdoorNumeric = function (e, t) { var n = i(t); return h(e, n) } }(jQuery), function (e) { e.caretTo = function (e, t) { if (e.createTextRange) { var n = e.createTextRange(); n.move("character", t), n.select() } else null != e.selectionStart && (e.focus(), e.setSelectionRange(t, t)) }, e.caretPos = function (e) { if ("selection" in document) { var t = e.createTextRange(); try { t.setEndPoint("EndToStart", document.selection.createRange()) } catch (n) { return 0 } return t.text.length } return null != e.selectionStart ? e.selectionStart : void 0 }, e.fn.caret = function (t, n) { return "undefined" == typeof t ? e.caretPos(this.get(0)) : this.queue(function (r) { if (isNaN(t)) { var a = e(this).val().indexOf(t); n === !0 ? a += t.length : "undefined" != typeof n && (a += n), e.caretTo(this, a) } else e.caretTo(this, t); r() }) }, e.fn.caretToStart = function () { return this.caret(0) }, e.fn.caretToEnd = function () { return this.queue(function (t) { e.caretTo(this, e(this).val().length), t() }) } }(jQuery), function (e) { var t = function (e) { return e ? e.ownerDocument.defaultView || e.ownerDocument.parentWindow : window }, n = function (t) { var n = e.Range.current(t).clone(), r = e.Range(t).select(t); return n.overlaps(r) ? (n.compare("START_TO_START", r) < 1 ? (startPos = 0, n.move("START_TO_START", r)) : (fromElementToCurrent = r.clone(), fromElementToCurrent.move("END_TO_START", n), startPos = fromElementToCurrent.toString().length), endPos = n.compare("END_TO_END", r) >= 0 ? r.toString().length : startPos + n.toString().length, { start: startPos, end: endPos }) : null }, r = function (r) { var a = t(r); if (void 0 !== r.selectionStart) return document.activeElement && document.activeElement != r && r.selectionStart == r.selectionEnd && 0 == r.selectionStart ? { start: r.value.length, end: r.value.length } : { start: r.selectionStart, end: r.selectionEnd }; if (a.getSelection) return n(r, a); try { if ("input" == r.nodeName.toLowerCase()) { var o = t(r).document.selection.createRange(), l = r.createTextRange(); l.setEndPoint("EndToStart", o); var i = l.text.length; return { start: i, end: i + o.text.length } } var c = n(r, a); if (!c) return c; var u = e.Range.current().clone(), s = u.clone().collapse().range, f = u.clone().collapse(!1).range; return s.moveStart("character", -1), f.moveStart("character", -1), 0 != c.startPos && "" == s.text && (c.startPos += 2), 0 != c.endPos && "" == f.text && (c.endPos += 2), c } catch (p) { return { start: r.value.length, end: r.value.length } } }, a = function (e, n, r) { var a = t(e); if (e.setSelectionRange) void 0 === r ? (e.focus(), e.setSelectionRange(n, n)) : (e.select(), e.selectionStart = n, e.selectionEnd = r); else if (e.createTextRange) { var o = e.createTextRange(); o.moveStart("character", n), r = r || n, o.moveEnd("character", r - e.value.length), o.select() } else if (a.getSelection) { var i = a.document, c = a.getSelection(), u = i.createRange(), s = [n, void 0 !== r ? r : n]; l([e], s), u.setStart(s[0].el, s[0].count), u.setEnd(s[1].el, s[1].count), c.removeAllRanges(), c.addRange(u) } else if (a.document.body.createTextRange) { var u = document.body.createTextRange(); u.moveToElementText(e), u.collapse(), u.moveStart("character", n), u.moveEnd("character", void 0 !== r ? r : n), u.select() } }, o = function (e, t, n, r) { "number" == typeof n[0] && n[0] < t && (n[0] = { el: r, count: n[0] - e }), "number" == typeof n[1] && n[1] <= t && (n[1] = { el: r, count: n[1] - e }) }, l = function (e, t, n) { var r, a; n = n || 0; for (var i = 0; e[i]; i++) r = e[i], 3 === r.nodeType || 4 === r.nodeType ? (a = n, n += r.nodeValue.length, o(a, n, t, r)) : 8 !== r.nodeType && (n = l(r.childNodes, t, n)); return n }; jQuery.fn.selection = function (e, t) { return void 0 !== e ? this.each(function () { a(this, e, t) }) : r(this[0]) }, e.fn.selection.getCharElement = l }(jQuery);